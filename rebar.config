{erl_opts, [
    debug_info,
    warnings_as_errors,
    {platform_define, "^[0-9]+", namespaced_types},
    {platform_define, "^18", deprecated_now},
    warn_export_vars,
    warn_unused_import,
    warn_keywords
]}.

{dialyzer, [
    {plt_apps, all_deps},
    incremental,
    {warnings, [unmatched_returns]}
]}.

{profiles, [
    {test, [
        {cover_enabled, true},
        {cover_opts, [verbose]}
    ]}
]}.

{deps, [
    {stdlib2, {git, "git@github.com:kivra/stdlib2.git", {tag, "v1.4.6"}}},
    {riakc, {git, "git@github.com:kivra/riak-erlang-client.git", {tag, "2.5.4"}}},

    %% Metrics
    {telemetry, "~> 1.2"},
    {prometheus, "4.10.0"}
]}.

{overrides, [
    {override, riakc, [
        {erl_opts, [
            debug_info,
            warnings_as_errors,
            {platform_define, "^[0-9]+", namespaced_types},
            {platform_define, "(?=^[0-9]+)(?!^17)", deprecated_now},
            {platform_define, "^(19|[2-9])", deprecated_19}
        ]}
    ]},
    {override, hamcrest, [{plugins, []}]}
]}.

{shell, [{apps, [krc]}]}.

{xref_checks, [
    undefined_function_calls,
    undefined_functions,
    locals_not_used,
    deprecated_function_calls,
    deprecated_functions
]}.

{project_plugins, [
    {erlfmt, "1.5.0"}
]}.

{erlfmt, [
    write,
    {files, ["**/*.{hrl,erl,app.src,config}"]},
    {exclude_files, ["_build/**", ".direnv/**", ".github/**", "doc/**"]}
]}.
